include: output.def
include: macros_output/case.def
include: macros_output/for.def
include: macros_output/functions.def
include: macros_output/scope.def
include: macros_output/variables.def
include: macros_output/types.def
include: macros/parse.def
include: macros/dumpout.def
include: macros/functions.def
include: macros/variables.def
include: macros/print.def

page: output_f90, output_main
    output_dir: lib/MyDef
    ext: f90
    package: MyDef::output_f90
    autolist: 1


#----------------------------------------------- 
subcode: dumpout
    $foreach $func in @function_list
        process_function_std($func)
    $call process_link_objects

    my $global_init=MyDef::compileutil::get_named_block("global_init")
    $call dump_globals, $global_init
    MyDef::dumpout::dumpout($dump)

    return

    #------------------------------------------- 
    subcode: dump_globals(out)
        $call dump_vars, $global_list, $global_hash, $(out)
        my $main_list = $main_func->{var_list}
        my $main_hash = $main_func->{var_hash}
        $call dump_vars, $main_list, $main_hash, $(out)

    subcode: process_link_objects
        my @objlist
        my @liblist
        $foreach $i in keys %objects
            $if $i=~/^lib(.*)/
                push @liblist, "-l$1"
            $else
                push @objlist, $i
        my ($lib_list, $obj_list)
        $if @liblist
            $lib_list=join(" ", @liblist)
            $page->{lib_list}=$lib_list
        $if @objlist
            $obj_list=join(" ", @objlist)
            $page->{lib_list}.=" ".$obj_list

